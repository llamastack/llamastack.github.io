---
id: create-an-agent-with-the-given-configuration
title: "Create an agent with the given configuration."
description: "Create an agent with the given configuration."
sidebar_label: "Create an agent with the given configuration."
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api-experimental/llama-stack-specification-experimental-apis
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create an agent with the given configuration."}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/v1alpha/agents"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Create an agent with the given configuration.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={[]}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"agent_config":{"description":"The configuration for the agent.","type":"object","properties":{"sampling_params":{"type":"object","properties":{"strategy":{"oneOf":[{"type":"object","properties":{"type":{"type":"string","const":"greedy","default":"greedy","description":"Must be \"greedy\" to identify this sampling strategy"}},"additionalProperties":false,"required":["type"],"title":"GreedySamplingStrategy","description":"Greedy sampling strategy that selects the highest probability token at each step."},{"type":"object","properties":{"type":{"type":"string","const":"top_p","default":"top_p","description":"Must be \"top_p\" to identify this sampling strategy"},"temperature":{"type":"number","description":"Controls randomness in sampling. Higher values increase randomness"},"top_p":{"type":"number","default":0.95,"description":"Cumulative probability threshold for nucleus sampling. Defaults to 0.95"}},"additionalProperties":false,"required":["type"],"title":"TopPSamplingStrategy","description":"Top-p (nucleus) sampling strategy that samples from the smallest set of tokens with cumulative probability >= p."},{"type":"object","properties":{"type":{"type":"string","const":"top_k","default":"top_k","description":"Must be \"top_k\" to identify this sampling strategy"},"top_k":{"type":"integer","description":"Number of top tokens to consider for sampling. Must be at least 1"}},"additionalProperties":false,"required":["type","top_k"],"title":"TopKSamplingStrategy","description":"Top-k sampling strategy that restricts sampling to the k most likely tokens."}],"discriminator":{"propertyName":"type","mapping":{"greedy":{"type":"object","properties":{"type":{"type":"string","const":"greedy","default":"greedy","description":"Must be \"greedy\" to identify this sampling strategy"}},"additionalProperties":false,"required":["type"],"title":"GreedySamplingStrategy","description":"Greedy sampling strategy that selects the highest probability token at each step."},"top_p":{"type":"object","properties":{"type":{"type":"string","const":"top_p","default":"top_p","description":"Must be \"top_p\" to identify this sampling strategy"},"temperature":{"type":"number","description":"Controls randomness in sampling. Higher values increase randomness"},"top_p":{"type":"number","default":0.95,"description":"Cumulative probability threshold for nucleus sampling. Defaults to 0.95"}},"additionalProperties":false,"required":["type"],"title":"TopPSamplingStrategy","description":"Top-p (nucleus) sampling strategy that samples from the smallest set of tokens with cumulative probability >= p."},"top_k":{"type":"object","properties":{"type":{"type":"string","const":"top_k","default":"top_k","description":"Must be \"top_k\" to identify this sampling strategy"},"top_k":{"type":"integer","description":"Number of top tokens to consider for sampling. Must be at least 1"}},"additionalProperties":false,"required":["type","top_k"],"title":"TopKSamplingStrategy","description":"Top-k sampling strategy that restricts sampling to the k most likely tokens."}}},"description":"The sampling strategy."},"max_tokens":{"type":"integer","default":0,"description":"The maximum number of tokens that can be generated in the completion. The token count of your prompt plus max_tokens cannot exceed the model's context length."},"repetition_penalty":{"type":"number","default":1,"description":"Number between -2.0 and 2.0. Positive values penalize new tokens based on whether they appear in the text so far, increasing the model's likelihood to talk about new topics."},"stop":{"type":"array","items":{"type":"string"},"description":"Up to 4 sequences where the API will stop generating further tokens. The returned text will not contain the stop sequence."}},"additionalProperties":false,"required":["strategy"],"title":"SamplingParams","description":"Sampling parameters."},"input_shields":{"type":"array","items":{"type":"string"}},"output_shields":{"type":"array","items":{"type":"string"}},"toolgroups":{"type":"array","items":{"oneOf":[{"type":"string"},{"type":"object","properties":{"name":{"type":"string"},"args":{"type":"object","additionalProperties":{"oneOf":[{"type":"null"},{"type":"boolean"},{"type":"number"},{"type":"string"},{"type":"array"},{"type":"object"}]}}},"additionalProperties":false,"required":["name","args"],"title":"AgentToolGroupWithArgs"}],"title":"AgentTool"}},"client_tools":{"type":"array","items":{"type":"object","properties":{"toolgroup_id":{"type":"string","description":"(Optional) ID of the tool group this tool belongs to"},"name":{"type":"string","description":"Name of the tool"},"description":{"type":"string","description":"(Optional) Human-readable description of what the tool does"},"input_schema":{"type":"object","additionalProperties":{"oneOf":[{"type":"null"},{"type":"boolean"},{"type":"number"},{"type":"string"},{"type":"array"},{"type":"object"}]},"description":"(Optional) JSON Schema for tool inputs (MCP inputSchema)"},"output_schema":{"type":"object","additionalProperties":{"oneOf":[{"type":"null"},{"type":"boolean"},{"type":"number"},{"type":"string"},{"type":"array"},{"type":"object"}]},"description":"(Optional) JSON Schema for tool outputs (MCP outputSchema)"},"metadata":{"type":"object","additionalProperties":{"oneOf":[{"type":"null"},{"type":"boolean"},{"type":"number"},{"type":"string"},{"type":"array"},{"type":"object"}]},"description":"(Optional) Additional metadata about the tool"}},"additionalProperties":false,"required":["name"],"title":"ToolDef","description":"Tool definition used in runtime contexts."}},"tool_choice":{"type":"string","enum":["auto","required","none"],"title":"ToolChoice","description":"Whether tool use is required or automatic. This is a hint to the model which may not be followed. It depends on the Instruction Following capabilities of the model.","deprecated":true},"tool_prompt_format":{"type":"string","enum":["json","function_tag","python_list"],"title":"ToolPromptFormat","description":"Prompt format for calling custom / zero shot tools.","deprecated":true},"tool_config":{"type":"object","properties":{"tool_choice":{"oneOf":[{"type":"string","enum":["auto","required","none"],"title":"ToolChoice","description":"Whether tool use is required or automatic. This is a hint to the model which may not be followed. It depends on the Instruction Following capabilities of the model."},{"type":"string"}],"default":"auto","description":"(Optional) Whether tool use is automatic, required, or none. Can also specify a tool name to use a specific tool. Defaults to ToolChoice.auto."},"tool_prompt_format":{"type":"string","enum":["json","function_tag","python_list"],"description":"(Optional) Instructs the model how to format tool calls. By default, Llama Stack will attempt to use a format that is best adapted to the model. - `ToolPromptFormat.json`: The tool calls are formatted as a JSON object. - `ToolPromptFormat.function_tag`: The tool calls are enclosed in a <function=function_name> tag. - `ToolPromptFormat.python_list`: The tool calls are output as Python syntax -- a list of function calls."},"system_message_behavior":{"type":"string","enum":["append","replace"],"description":"(Optional) Config for how to override the default system prompt. - `SystemMessageBehavior.append`: Appends the provided system message to the default system prompt. - `SystemMessageBehavior.replace`: Replaces the default system prompt with the provided system message. The system message can include the string '{{function_definitions}}' to indicate where the function definitions should be inserted.","default":"append"}},"additionalProperties":false,"title":"ToolConfig","description":"Configuration for tool use."},"max_infer_iters":{"type":"integer","default":10},"model":{"type":"string","description":"The model identifier to use for the agent"},"instructions":{"type":"string","description":"The system instructions for the agent"},"name":{"type":"string","description":"Optional name for the agent, used in telemetry and identification"},"enable_session_persistence":{"type":"boolean","default":false,"description":"Optional flag indicating whether session data has to be persisted"},"response_format":{"description":"Optional response format configuration","oneOf":[{"type":"object","properties":{"type":{"type":"string","enum":["json_schema","grammar"],"description":"Must be \"json_schema\" to identify this format type","const":"json_schema","default":"json_schema"},"json_schema":{"type":"object","additionalProperties":{"oneOf":[{"type":"null"},{"type":"boolean"},{"type":"number"},{"type":"string"},{"type":"array"},{"type":"object"}]},"description":"The JSON schema the response should conform to. In a Python SDK, this is often a `pydantic` model."}},"additionalProperties":false,"required":["type","json_schema"],"title":"JsonSchemaResponseFormat","description":"Configuration for JSON schema-guided response generation."},{"type":"object","properties":{"type":{"type":"string","enum":["json_schema","grammar"],"description":"Must be \"grammar\" to identify this format type","const":"grammar","default":"grammar"},"bnf":{"type":"object","additionalProperties":{"oneOf":[{"type":"null"},{"type":"boolean"},{"type":"number"},{"type":"string"},{"type":"array"},{"type":"object"}]},"description":"The BNF grammar specification the response should conform to"}},"additionalProperties":false,"required":["type","bnf"],"title":"GrammarResponseFormat","description":"Configuration for grammar-guided response generation."}],"discriminator":{"propertyName":"type","mapping":{"json_schema":{"type":"object","properties":{"type":{"type":"string","enum":["json_schema","grammar"],"description":"Must be \"json_schema\" to identify this format type","const":"json_schema","default":"json_schema"},"json_schema":{"type":"object","additionalProperties":{"oneOf":[{"type":"null"},{"type":"boolean"},{"type":"number"},{"type":"string"},{"type":"array"},{"type":"object"}]},"description":"The JSON schema the response should conform to. In a Python SDK, this is often a `pydantic` model."}},"additionalProperties":false,"required":["type","json_schema"],"title":"JsonSchemaResponseFormat","description":"Configuration for JSON schema-guided response generation."},"grammar":{"type":"object","properties":{"type":{"type":"string","enum":["json_schema","grammar"],"description":"Must be \"grammar\" to identify this format type","const":"grammar","default":"grammar"},"bnf":{"type":"object","additionalProperties":{"oneOf":[{"type":"null"},{"type":"boolean"},{"type":"number"},{"type":"string"},{"type":"array"},{"type":"object"}]},"description":"The BNF grammar specification the response should conform to"}},"additionalProperties":false,"required":["type","bnf"],"title":"GrammarResponseFormat","description":"Configuration for grammar-guided response generation."}}},"title":"ResponseFormat"}},"additionalProperties":false,"required":["model","instructions"],"title":"AgentConfig"}},"additionalProperties":false,"required":["agent_config"],"title":"CreateAgentRequest"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"An AgentCreateResponse with the agent ID.","content":{"application/json":{"schema":{"type":"object","properties":{"agent_id":{"type":"string","description":"Unique identifier for the created agent"}},"additionalProperties":false,"required":["agent_id"],"title":"AgentCreateResponse","description":"Response returned when creating a new agent."}}}},"400":{"description":"The request was invalid or malformed","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"integer","description":"HTTP status code"},"title":{"type":"string","description":"Error title, a short summary of the error which is invariant for an error type"},"detail":{"type":"string","description":"Error detail, a longer human-readable description of the error"},"instance":{"type":"string","description":"(Optional) A URL which can be used to retrieve more information about the specific occurrence of the error"}},"additionalProperties":false,"required":["status","title","detail"],"title":"Error","description":"Error response from the API. Roughly follows RFC 7807."},"example":{"status":400,"title":"Bad Request","detail":"The request was invalid or malformed"}}}},"429":{"description":"The client has sent too many requests in a given amount of time","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"integer","description":"HTTP status code"},"title":{"type":"string","description":"Error title, a short summary of the error which is invariant for an error type"},"detail":{"type":"string","description":"Error detail, a longer human-readable description of the error"},"instance":{"type":"string","description":"(Optional) A URL which can be used to retrieve more information about the specific occurrence of the error"}},"additionalProperties":false,"required":["status","title","detail"],"title":"Error","description":"Error response from the API. Roughly follows RFC 7807."},"example":{"status":429,"title":"Too Many Requests","detail":"You have exceeded the rate limit. Please try again later."}}}},"500":{"description":"The server encountered an unexpected error","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"integer","description":"HTTP status code"},"title":{"type":"string","description":"Error title, a short summary of the error which is invariant for an error type"},"detail":{"type":"string","description":"Error detail, a longer human-readable description of the error"},"instance":{"type":"string","description":"(Optional) A URL which can be used to retrieve more information about the specific occurrence of the error"}},"additionalProperties":false,"required":["status","title","detail"],"title":"Error","description":"Error response from the API. Roughly follows RFC 7807."},"example":{"status":500,"title":"Internal Server Error","detail":"An unexpected error occurred. Our team has been notified."}}}},"default":{"description":"An unexpected error occurred","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"integer","description":"HTTP status code"},"title":{"type":"string","description":"Error title, a short summary of the error which is invariant for an error type"},"detail":{"type":"string","description":"Error detail, a longer human-readable description of the error"},"instance":{"type":"string","description":"(Optional) A URL which can be used to retrieve more information about the specific occurrence of the error"}},"additionalProperties":false,"required":["status","title","detail"],"title":"Error","description":"Error response from the API. Roughly follows RFC 7807."},"example":{"status":0,"title":"Error","detail":"An unexpected error occurred"}}}}}}
>
  
</StatusCodes>


      