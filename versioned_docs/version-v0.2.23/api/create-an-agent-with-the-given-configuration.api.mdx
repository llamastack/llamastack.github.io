---
id: create-an-agent-with-the-given-configuration
title: "Create an agent with the given configuration."
description: "Create an agent with the given configuration."
sidebar_label: "Create an agent with the given configuration."
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/llama-stack-specification
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create an agent with the given configuration."}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/v1/agents"}
  context={"endpoint"}
>

</MethodEndpoint>



Create an agent with the given configuration.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={[]}
>

</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"agent_config":{"description":"The configuration for the agent.","type":"object","properties":{"sampling_params":{"type":"object","properties":{"strategy":{"description":"The sampling strategy.","oneOf":[{"type":"object","properties":{"type":{"type":"string","const":"greedy","default":"greedy","description":"Must be \"greedy\" to identify this sampling strategy"}},"additionalProperties":false,"required":["type"],"title":"GreedySamplingStrategy","description":"Greedy sampling strategy that selects the highest probability token at each step."},{"type":"object","properties":{"type":{"type":"string","const":"top_p","default":"top_p","description":"Must be \"top_p\" to identify this sampling strategy"},"temperature":{"type":"number","description":"Controls randomness in sampling. Higher values increase randomness"},"top_p":{"type":"number","default":0.95,"description":"Cumulative probability threshold for nucleus sampling. Defaults to 0.95"}},"additionalProperties":false,"required":["type"],"title":"TopPSamplingStrategy","description":"Top-p (nucleus) sampling strategy that samples from the smallest set of tokens with cumulative probability >= p."},{"type":"object","properties":{"type":{"type":"string","const":"top_k","default":"top_k","description":"Must be \"top_k\" to identify this sampling strategy"},"top_k":{"type":"integer","description":"Number of top tokens to consider for sampling. Must be at least 1"}},"additionalProperties":false,"required":["type","top_k"],"title":"TopKSamplingStrategy","description":"Top-k sampling strategy that restricts sampling to the k most likely tokens."}],"discriminator":{"propertyName":"type","mapping":{"greedy":{"type":"object","properties":{"type":{"type":"string","const":"greedy","default":"greedy","description":"Must be \"greedy\" to identify this sampling strategy"}},"additionalProperties":false,"required":["type"],"title":"GreedySamplingStrategy","description":"Greedy sampling strategy that selects the highest probability token at each step."},"top_p":{"type":"object","properties":{"type":{"type":"string","const":"top_p","default":"top_p","description":"Must be \"top_p\" to identify this sampling strategy"},"temperature":{"type":"number","description":"Controls randomness in sampling. Higher values increase randomness"},"top_p":{"type":"number","default":0.95,"description":"Cumulative probability threshold for nucleus sampling. Defaults to 0.95"}},"additionalProperties":false,"required":["type"],"title":"TopPSamplingStrategy","description":"Top-p (nucleus) sampling strategy that samples from the smallest set of tokens with cumulative probability >= p."},"top_k":{"type":"object","properties":{"type":{"type":"string","const":"top_k","default":"top_k","description":"Must be \"top_k\" to identify this sampling strategy"},"top_k":{"type":"integer","description":"Number of top tokens to consider for sampling. Must be at least 1"}},"additionalProperties":false,"required":["type","top_k"],"title":"TopKSamplingStrategy","description":"Top-k sampling strategy that restricts sampling to the k most likely tokens."}}},"title":"SamplingStrategy"},"max_tokens":{"type":"integer","default":0,"description":"The maximum number of tokens that can be generated in the completion. The token count of your prompt plus max_tokens cannot exceed the model's context length."},"repetition_penalty":{"type":"number","default":1,"description":"Number between -2.0 and 2.0. Positive values penalize new tokens based on whether they appear in the text so far, increasing the model's likelihood to talk about new topics."},"stop":{"type":"array","items":{"type":"string"},"description":"Up to 4 sequences where the API will stop generating further tokens. The returned text will not contain the stop sequence."}},"additionalProperties":false,"required":["strategy"],"title":"SamplingParams","description":"Sampling parameters."},"input_shields":{"type":"array","items":{"type":"string"}},"output_shields":{"type":"array","items":{"type":"string"}},"toolgroups":{"type":"array","items":{"oneOf":[{"type":"string"},{"type":"object","properties":{"name":{"type":"string"},"args":{"type":"object","additionalProperties":{"oneOf":[{"type":"null"},{"type":"boolean"},{"type":"number"},{"type":"string"},{"type":"array"},{"type":"object"}]}}},"additionalProperties":false,"required":["name","args"],"title":"AgentToolGroupWithArgs"}],"title":"AgentTool"}},"client_tools":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string","description":"Name of the tool"},"description":{"type":"string","description":"(Optional) Human-readable description of what the tool does"},"parameters":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string","description":"Name of the parameter"},"parameter_type":{"type":"string","description":"Type of the parameter (e.g., string, integer)"},"description":{"type":"string","description":"Human-readable description of what the parameter does"},"required":{"type":"boolean","default":true,"description":"Whether this parameter is required for tool invocation"},"default":{"oneOf":[{"type":"null"},{"type":"boolean"},{"type":"number"},{"type":"string"},{"type":"array"},{"type":"object"}],"description":"(Optional) Default value for the parameter if not provided"}},"additionalProperties":false,"required":["name","parameter_type","description","required"],"title":"ToolParameter","description":"Parameter definition for a tool."},"description":"(Optional) List of parameters this tool accepts"},"metadata":{"type":"object","additionalProperties":{"oneOf":[{"type":"null"},{"type":"boolean"},{"type":"number"},{"type":"string"},{"type":"array"},{"type":"object"}]},"description":"(Optional) Additional metadata about the tool"}},"additionalProperties":false,"required":["name"],"title":"ToolDef","description":"Tool definition used in runtime contexts."}},"tool_choice":{"type":"string","enum":["auto","required","none"],"title":"ToolChoice","description":"Whether tool use is required or automatic. This is a hint to the model which may not be followed. It depends on the Instruction Following capabilities of the model.","deprecated":true},"tool_prompt_format":{"type":"string","enum":["json","function_tag","python_list"],"title":"ToolPromptFormat","description":"Prompt format for calling custom / zero shot tools.","deprecated":true},"tool_config":{"type":"object","properties":{"tool_choice":{"oneOf":[{"type":"string","enum":["auto","required","none"],"title":"ToolChoice","description":"Whether tool use is required or automatic. This is a hint to the model which may not be followed. It depends on the Instruction Following capabilities of the model."},{"type":"string"}],"default":"auto","description":"(Optional) Whether tool use is automatic, required, or none. Can also specify a tool name to use a specific tool. Defaults to ToolChoice.auto."},"tool_prompt_format":{"type":"string","enum":["json","function_tag","python_list"],"description":"(Optional) Instructs the model how to format tool calls. By default, Llama Stack will attempt to use a format that is best adapted to the model. - `ToolPromptFormat.json`: The tool calls are formatted as a JSON object. - `ToolPromptFormat.function_tag`: The tool calls are enclosed in a <function=function_name> tag. - `ToolPromptFormat.python_list`: The tool calls are output as Python syntax -- a list of function calls."},"system_message_behavior":{"type":"string","enum":["append","replace"],"description":"(Optional) Config for how to override the default system prompt. - `SystemMessageBehavior.append`: Appends the provided system message to the default system prompt. - `SystemMessageBehavior.replace`: Replaces the default system prompt with the provided system message. The system message can include the string '{{function_definitions}}' to indicate where the function definitions should be inserted.","default":"append"}},"additionalProperties":false,"title":"ToolConfig","description":"Configuration for tool use."},"max_infer_iters":{"type":"integer","default":10},"model":{"type":"string","description":"The model identifier to use for the agent"},"instructions":{"type":"string","description":"The system instructions for the agent"},"name":{"type":"string","description":"Optional name for the agent, used in telemetry and identification"},"enable_session_persistence":{"type":"boolean","default":false,"description":"Optional flag indicating whether session data has to be persisted"},"response_format":{"description":"Optional response format configuration","oneOf":[{"type":"object","properties":{"type":{"type":"string","enum":["json_schema","grammar"],"description":"Must be \"json_schema\" to identify this format type","const":"json_schema","default":"json_schema"},"json_schema":{"type":"object","additionalProperties":{"oneOf":[{"type":"null"},{"type":"boolean"},{"type":"number"},{"type":"string"},{"type":"array"},{"type":"object"}]},"description":"The JSON schema the response should conform to. In a Python SDK, this is often a `pydantic` model."}},"additionalProperties":false,"required":["type","json_schema"],"title":"JsonSchemaResponseFormat","description":"Configuration for JSON schema-guided response generation."},{"type":"object","properties":{"type":{"type":"string","enum":["json_schema","grammar"],"description":"Must be \"grammar\" to identify this format type","const":"grammar","default":"grammar"},"bnf":{"type":"object","additionalProperties":{"oneOf":[{"type":"null"},{"type":"boolean"},{"type":"number"},{"type":"string"},{"type":"array"},{"type":"object"}]},"description":"The BNF grammar specification the response should conform to"}},"additionalProperties":false,"required":["type","bnf"],"title":"GrammarResponseFormat","description":"Configuration for grammar-guided response generation."}],"discriminator":{"propertyName":"type","mapping":{"json_schema":{"type":"object","properties":{"type":{"type":"string","enum":["json_schema","grammar"],"description":"Must be \"json_schema\" to identify this format type","const":"json_schema","default":"json_schema"},"json_schema":{"type":"object","additionalProperties":{"oneOf":[{"type":"null"},{"type":"boolean"},{"type":"number"},{"type":"string"},{"type":"array"},{"type":"object"}]},"description":"The JSON schema the response should conform to. In a Python SDK, this is often a `pydantic` model."}},"additionalProperties":false,"required":["type","json_schema"],"title":"JsonSchemaResponseFormat","description":"Configuration for JSON schema-guided response generation."},"grammar":{"type":"object","properties":{"type":{"type":"string","enum":["json_schema","grammar"],"description":"Must be \"grammar\" to identify this format type","const":"grammar","default":"grammar"},"bnf":{"type":"object","additionalProperties":{"oneOf":[{"type":"null"},{"type":"boolean"},{"type":"number"},{"type":"string"},{"type":"array"},{"type":"object"}]},"description":"The BNF grammar specification the response should conform to"}},"additionalProperties":false,"required":["type","bnf"],"title":"GrammarResponseFormat","description":"Configuration for grammar-guided response generation."}}},"title":"ResponseFormat"}},"additionalProperties":false,"required":["model","instructions"],"title":"AgentConfig"}},"additionalProperties":false,"required":["agent_config"],"title":"CreateAgentRequest"}}},"required":true}}
>

</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"An AgentCreateResponse with the agent ID.","content":{"application/json":{"schema":{"type":"object","properties":{"agent_id":{"type":"string","description":"Unique identifier for the created agent"}},"additionalProperties":false,"required":["agent_id"],"title":"AgentCreateResponse","description":"Response returned when creating a new agent."}}}},"400":{"description":"The request was invalid or malformed","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"integer","description":"HTTP status code"},"title":{"type":"string","description":"Error title, a short summary of the error which is invariant for an error type"},"detail":{"type":"string","description":"Error detail, a longer human-readable description of the error"},"instance":{"type":"string","description":"(Optional) A URL which can be used to retrieve more information about the specific occurrence of the error"}},"additionalProperties":false,"required":["status","title","detail"],"title":"Error","description":"Error response from the API. Roughly follows RFC 7807."},"example":{"status":400,"title":"Bad Request","detail":"The request was invalid or malformed"}}}},"429":{"description":"The client has sent too many requests in a given amount of time","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"integer","description":"HTTP status code"},"title":{"type":"string","description":"Error title, a short summary of the error which is invariant for an error type"},"detail":{"type":"string","description":"Error detail, a longer human-readable description of the error"},"instance":{"type":"string","description":"(Optional) A URL which can be used to retrieve more information about the specific occurrence of the error"}},"additionalProperties":false,"required":["status","title","detail"],"title":"Error","description":"Error response from the API. Roughly follows RFC 7807."},"example":{"status":429,"title":"Too Many Requests","detail":"You have exceeded the rate limit. Please try again later."}}}},"500":{"description":"The server encountered an unexpected error","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"integer","description":"HTTP status code"},"title":{"type":"string","description":"Error title, a short summary of the error which is invariant for an error type"},"detail":{"type":"string","description":"Error detail, a longer human-readable description of the error"},"instance":{"type":"string","description":"(Optional) A URL which can be used to retrieve more information about the specific occurrence of the error"}},"additionalProperties":false,"required":["status","title","detail"],"title":"Error","description":"Error response from the API. Roughly follows RFC 7807."},"example":{"status":500,"title":"Internal Server Error","detail":"An unexpected error occurred. Our team has been notified."}}}},"default":{"description":"An unexpected error occurred","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"integer","description":"HTTP status code"},"title":{"type":"string","description":"Error title, a short summary of the error which is invariant for an error type"},"detail":{"type":"string","description":"Error detail, a longer human-readable description of the error"},"instance":{"type":"string","description":"(Optional) A URL which can be used to retrieve more information about the specific occurrence of the error"}},"additionalProperties":false,"required":["status","title","detail"],"title":"Error","description":"Error response from the API. Roughly follows RFC 7807."},"example":{"status":0,"title":"Error","detail":"An unexpected error occurred"}}}}}}
>

</StatusCodes>
