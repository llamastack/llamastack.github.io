


<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dell-TGI Distribution &mdash; llama-stack 0.2.19 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/my_theme.css?v=f1163765" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../../_static/dark_mode_css/general.css?v=c0a7eb24" />
      <link rel="stylesheet" type="text/css" href="../../_static/dark_mode_css/dark.css?v=70edf1c7" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=0a5b2d08"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=09bf800d"></script>
      <script src="../../_static/js/detect_theme.js?v=76226c80"></script>
      <script src="../../_static/js/keyboard_shortcuts.js?v=62563c3b"></script>
      <script src="../../_static/design-tabs.js?v=f930bc37"></script>
      <script src="../../_static/dark_mode_js/default_light.js?v=c2e647ce"></script>
      <script src="../../_static/dark_mode_js/theme_switcher.js?v=358d3910"></script>
    <script src="../../_static/js/theme.js"></script>
    <script src="../../_static/js/versions.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
 

<script src="../../_static/version-loader.js"></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="../../index.html" class="icon icon-home">
            llama-stack
          </a>
              <div class="switch-menus">
                <div class="version-switch"></div>
                <div class="language-switch"></div>
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Llama Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../concepts/index.html">Core Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../providers/index.html">API Providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Distributions Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced_apis/index.html">Advanced APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../building_applications/index.html">AI Application Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deploying/index.html">Deployment Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Contributing to Llama Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html#llama-stack-benchmark-suite-on-kubernetes">Llama Stack Benchmark Suite on Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references/index.html">References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">llama-stack</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Dell-TGI Distribution</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/distributions/self_hosted_distro/dell-tgi.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="dell-tgi-distribution">
<h1>Dell-TGI Distribution<a class="headerlink" href="#dell-tgi-distribution" title="Link to this heading"></a></h1>
<div class="toctree-wrapper compound">
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">llamastack/distribution-tgi</span></code> distribution consists of the following provider configurations.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>API</strong></p></th>
<th class="head"><p><strong>Inference</strong></p></th>
<th class="head"><p><strong>Agents</strong></p></th>
<th class="head"><p><strong>Memory</strong></p></th>
<th class="head"><p><strong>Safety</strong></p></th>
<th class="head"><p><strong>Telemetry</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Provider(s)</strong></p></td>
<td><p>remote::tgi</p></td>
<td><p>meta-reference</p></td>
<td><p>meta-reference, remote::pgvector, remote::chroma</p></td>
<td><p>meta-reference</p></td>
<td><p>meta-reference</p></td>
</tr>
</tbody>
</table>
<p>The only difference vs. the <code class="docutils literal notranslate"><span class="pre">tgi</span></code> distribution is that it runs the Dell-TGI server for inference.</p>
<section id="start-the-distribution-single-node-gpu">
<h2>Start the Distribution (Single Node GPU)<a class="headerlink" href="#start-the-distribution-single-node-gpu" title="Link to this heading"></a></h2>
<blockquote>
<div><p>[!NOTE]
This assumes you have access to GPU to start a TGI server with access to your GPU.</p>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd distributions/dell-tgi/
$ ls
compose.yaml  README.md  run.yaml
$ docker compose up
</pre></div>
</div>
<p>The script will first start up TGI server, then start up Llama Stack distribution server hooking up to the remote TGI provider for inference. You should be able to see the following outputs –</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">text</span><span class="o">-</span><span class="n">generation</span><span class="o">-</span><span class="n">inference</span><span class="p">]</span> <span class="o">|</span> <span class="mi">2024</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">15</span><span class="n">T18</span><span class="p">:</span><span class="mi">56</span><span class="p">:</span><span class="mf">33.810397</span><span class="n">Z</span>  <span class="n">INFO</span> <span class="n">text_generation_router</span><span class="p">::</span><span class="n">server</span><span class="p">:</span> <span class="n">router</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">server</span><span class="o">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">1813</span><span class="p">:</span> <span class="n">Using</span> <span class="n">config</span> <span class="n">Some</span><span class="p">(</span><span class="n">Llama</span><span class="p">)</span>
<span class="p">[</span><span class="n">text</span><span class="o">-</span><span class="n">generation</span><span class="o">-</span><span class="n">inference</span><span class="p">]</span> <span class="o">|</span> <span class="mi">2024</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">15</span><span class="n">T18</span><span class="p">:</span><span class="mi">56</span><span class="p">:</span><span class="mf">33.810448</span><span class="n">Z</span>  <span class="n">WARN</span> <span class="n">text_generation_router</span><span class="p">::</span><span class="n">server</span><span class="p">:</span> <span class="n">router</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">server</span><span class="o">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">1960</span><span class="p">:</span> <span class="n">Invalid</span> <span class="n">hostname</span><span class="p">,</span> <span class="n">defaulting</span> <span class="n">to</span> <span class="mf">0.0.0.0</span>
<span class="p">[</span><span class="n">text</span><span class="o">-</span><span class="n">generation</span><span class="o">-</span><span class="n">inference</span><span class="p">]</span> <span class="o">|</span> <span class="mi">2024</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">15</span><span class="n">T18</span><span class="p">:</span><span class="mi">56</span><span class="p">:</span><span class="mf">33.864143</span><span class="n">Z</span>  <span class="n">INFO</span> <span class="n">text_generation_router</span><span class="p">::</span><span class="n">server</span><span class="p">:</span> <span class="n">router</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">server</span><span class="o">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">2353</span><span class="p">:</span> <span class="n">Connected</span>
<span class="n">INFO</span><span class="p">:</span>     <span class="n">Started</span> <span class="n">server</span> <span class="n">process</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">INFO</span><span class="p">:</span>     <span class="n">Waiting</span> <span class="k">for</span> <span class="n">application</span> <span class="n">startup</span><span class="o">.</span>
<span class="n">INFO</span><span class="p">:</span>     <span class="n">Application</span> <span class="n">startup</span> <span class="n">complete</span><span class="o">.</span>
<span class="n">INFO</span><span class="p">:</span>     <span class="n">Uvicorn</span> <span class="n">running</span> <span class="n">on</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="p">[::]:</span><span class="mi">8321</span> <span class="p">(</span><span class="n">Press</span> <span class="n">CTRL</span><span class="o">+</span><span class="n">C</span> <span class="n">to</span> <span class="n">quit</span><span class="p">)</span>
</pre></div>
</div>
<p>To kill the server</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">compose</span> <span class="n">down</span>
</pre></div>
</div>
</section>
<section id="alternative-dell-tgi-server-llama-stack-run-single-node-gpu">
<h2>(Alternative) Dell-TGI server + llama stack run (Single Node GPU)<a class="headerlink" href="#alternative-dell-tgi-server-llama-stack-run-single-node-gpu" title="Link to this heading"></a></h2>
<section id="start-dell-tgi-server-locally">
<h3>Start Dell-TGI server locally<a class="headerlink" href="#start-dell-tgi-server-locally" title="Link to this heading"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">it</span> <span class="o">--</span><span class="n">pull</span> <span class="n">always</span> <span class="o">--</span><span class="n">shm</span><span class="o">-</span><span class="n">size</span> <span class="mi">1</span><span class="n">g</span> <span class="o">-</span><span class="n">p</span> <span class="mi">80</span><span class="p">:</span><span class="mi">80</span> <span class="o">--</span><span class="n">gpus</span> <span class="mi">4</span> \
<span class="o">-</span><span class="n">e</span> <span class="n">NUM_SHARD</span><span class="o">=</span><span class="mi">4</span>
<span class="o">-</span><span class="n">e</span> <span class="n">MAX_BATCH_PREFILL_TOKENS</span><span class="o">=</span><span class="mi">32768</span> \
<span class="o">-</span><span class="n">e</span> <span class="n">MAX_INPUT_TOKENS</span><span class="o">=</span><span class="mi">8000</span> \
<span class="o">-</span><span class="n">e</span> <span class="n">MAX_TOTAL_TOKENS</span><span class="o">=</span><span class="mi">8192</span> \
<span class="n">registry</span><span class="o">.</span><span class="n">dell</span><span class="o">.</span><span class="n">huggingface</span><span class="o">.</span><span class="n">co</span><span class="o">/</span><span class="n">enterprise</span><span class="o">-</span><span class="n">dell</span><span class="o">-</span><span class="n">inference</span><span class="o">-</span><span class="n">meta</span><span class="o">-</span><span class="n">llama</span><span class="o">-</span><span class="n">meta</span><span class="o">-</span><span class="n">llama</span><span class="o">-</span><span class="mf">3.1</span><span class="o">-</span><span class="mi">8</span><span class="n">b</span><span class="o">-</span><span class="n">instruct</span>
</pre></div>
</div>
</section>
<section id="start-llama-stack-server-pointing-to-tgi-server">
<h3>Start Llama Stack server pointing to TGI server<a class="headerlink" href="#start-llama-stack-server-pointing-to-tgi-server" title="Link to this heading"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="o">--</span><span class="n">pull</span> <span class="n">always</span> <span class="o">--</span><span class="n">network</span> <span class="n">host</span> <span class="o">-</span><span class="n">it</span> <span class="o">-</span><span class="n">p</span> <span class="mi">8321</span><span class="p">:</span><span class="mi">8321</span> <span class="o">-</span><span class="n">v</span> <span class="o">./</span><span class="n">run</span><span class="o">.</span><span class="n">yaml</span><span class="p">:</span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">my</span><span class="o">-</span><span class="n">run</span><span class="o">.</span><span class="n">yaml</span> <span class="o">--</span><span class="n">gpus</span><span class="o">=</span><span class="nb">all</span> <span class="n">llamastack</span><span class="o">/</span><span class="n">distribution</span><span class="o">-</span><span class="n">tgi</span> <span class="o">--</span><span class="n">yaml_config</span> <span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">my</span><span class="o">-</span><span class="n">run</span><span class="o">.</span><span class="n">yaml</span>
</pre></div>
</div>
<p>Make sure in you <code class="docutils literal notranslate"><span class="pre">run.yaml</span></code> file, you inference provider is pointing to the correct TGI server endpoint. E.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inference</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">provider_id</span><span class="p">:</span> <span class="n">tgi0</span>
    <span class="n">provider_type</span><span class="p">:</span> <span class="n">remote</span><span class="p">::</span><span class="n">tgi</span>
    <span class="n">config</span><span class="p">:</span>
      <span class="n">url</span><span class="p">:</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0.0.1</span><span class="p">:</span><span class="mi">5009</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Meta.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Read the Docs</span>
    v: v0.2.19
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Versions</dt>
      <dd>
        <a href="/v0.2.19/">latest</a>
      </dd>
      <dd class="rtd-current-item">
        <a href="/v0.2.19/">v0.2.19</a>
      </dd>
      <dd>
        <a href="/v0.2.18/">v0.2.18</a>
      </dd>
      <dd>
        <a href="/v0.2.17/">v0.2.17</a>
      </dd>
      <dd>
        <a href="/v0.2.16/">v0.2.16</a>
      </dd>
      <dd>
        <a href="/v0.2.15/">v0.2.15</a>
      </dd>
      <dd>
        <a href="/v0.2.14/">v0.2.14</a>
      </dd>
      <dd>
        <a href="/v0.2.13/">v0.2.13</a>
      </dd>
      <dd>
        <a href="/v0.2.12/">v0.2.12</a>
      </dd>
      <dd>
        <a href="/v0.2.11/">v0.2.11</a>
      </dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>